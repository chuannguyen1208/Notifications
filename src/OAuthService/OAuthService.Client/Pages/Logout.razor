@page "/logout"
@inject IAuthService authSvc
@inject NavigationManager nav
@attribute [StreamRendering]

<div>@message</div>

@code {
    [SupplyParameterFromQuery] public string? ReturnUrl { get; set; }
    private string message = "Logging out...";

    protected override async Task OnInitializedAsync()
    {
        await authSvc.LogoutAsync();

        await Task.Delay(1000);
        if (!string.IsNullOrEmpty(ReturnUrl))
        {
            nav.NavigateTo(ReturnUrl);
        }
        else
        {
            message = "Logged out, no return url detected.";
        }
    }
}
